<% layout("layouts/boilerplate") -%>
<body>
  <h3>Place details</h3>
  <div class="card offset-2 mt-2" style="width: 18rem">
    <img
      src="<%= listing.image %>"
      class="card-img-top show-img"
      alt="listing_img"
    />
    <div class="card-body">
      <p class="card-text"><b><%= listing.title %></b></p>
      <ul class="list-unstyled">
        <div class="card-text-description">
          <p><%= listing.description %></p>
        </div>

        <li>&#8377;<%= listing.price.toLocaleString("en-in") %></li>
        <li><%= listing.country %></li>
        <li><%= listing.location %></li>
      </ul>
    </div>
  </div>
  <div class="row">
    <div class="col-auto offset-2">
      <a href="/listings/<%=listing._id%>/edit" class="btn btn-dark">Edit</a>
    </div>
    <div class="col-auto">
      <form
        id="deleteForm-<%= listing._id %>"
        method="POST"
        action="/listings/<%= listing._id %>?_method=DELETE"
      >
        <button
          type="button"
          class="btn btn-danger"
          onclick="confirmDelete('<%= listing._id %>')"
        >
          Delete
        </button>
      </form>

      <script>
        function confirmDelete(id) {
          if (confirm("Are you sure you want to delete this listing?")) {
            document.getElementById("deleteForm-" + id).submit();
          }
        }
      </script>
    </div>
  </div>
</body>
